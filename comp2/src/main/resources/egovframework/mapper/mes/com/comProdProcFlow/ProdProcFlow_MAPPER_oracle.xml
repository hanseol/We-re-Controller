<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mes.com.prodProcFlow.service.impl.ProdProcFlowMapper">
	
	<!-- 마스터코드 조회 -->
	<select id="selectComProdList" parameterType="mes.com.prodProcFlow.service.ProdProcFlowVO" resultType="egovMap">
		SELECT * FROM (
			SELECT A.*, ROWNUM RNUM FROM (
					SELECT COM_PRODUCT_CODE
							, COM_PRODUCT_NAME
					FROM COM_PRODUCT
					WHERE 1=1
				<![CDATA[					
			) A WHERE ROWNUM <= #{lastIndex}
		)WHERE RNUM >= #{firstIndex}
		]]>
	</select>
		
	<!-- 디테일코드 조회 -->
	<select id="selectProdProcList" parameterType="mes.com.prodProcFlow.service.ProdProcFlowVO" resultType="egovMap">
		SELECT * FROM (
			SELECT A.*, ROWNUM RNUM FROM (
					SELECT a.COM_PRODUCT_CODE
							, a.COM_PRODUCT_NAME
							, a.COM_PRODUCT_SIZE
							, a.COM_PRODUCT_UNIT
							, a.COM_PRODUCT_USE
							, b.SAL_INOUT_CODE
							, c.COM_CODE_DETAIL_NAME
					FROM COM_PRODUCT a
							, SAL_INOUT b
							, COM_CODE_DETAIL c
					WHERE a.COM_PRODUCT_CODE = b.COM_PRODUCT_CODE
					AND b.SAL_INOUT_CODE = c.COM_CODE_DETAIL_ID
					AND 1=1
					<if test="comProductCode != null and comProductCode != '' ">
					AND a.COM_PRODUCT_CODE = UPPER(#{comProductCode})
					</if>
					
				<![CDATA[					
			) A WHERE ROWNUM <= #{lastIndex}
		)WHERE RNUM >= #{firstIndex}
		]]>
	</select>
	
	<!-- 공정전개 -->
	<select id="selectProcFlowList" parameterType="mes.com.prodProcFlow.service.ProdProcFlowVO" resultType="egovMap">
		SELECT * FROM (
			SELECT A.*, ROWNUM RNUM FROM (
				SELECT a.COM_PROCESS_SEQ
						, b.COM_PROCESS_NAME
						, b.COM_PROCESS_DESC
						, b.COM_PROCESS_UNIT
						, b.COM_PROCESS_BUHA
						, b.COM_PROCESS_LEADTIME
						, b.COM_PROCESS_GUBUN
						, b.COM_PROCESS_ETC
				FROM COM_PROCESS a
					, COM_PROCESS_DETAIL b
				WHERE a.COM_PROCESS_CODE = b.COM_PROCESS_CODE
				AND 1=1
				<if test="comProductCode != null and comProductCode != '' ">
				AND a.COM_PRODUCT_CODE = UPPER(#{comProductCode})
				</if>
				ORDER BY a.COM_PROCESS_SEQ ASC
				<![CDATA[					
			) A WHERE ROWNUM <= #{lastIndex}
		)WHERE RNUM >= #{firstIndex}
		]]>
	</select>

	<!-- 디테일코드 업데이트 -->
	<update id="updateMatrDtaListDetail">
	</update>
	
	<!-- 디테일코드 삽입 -->
	<insert id="insertMatrDtaListDetail">
	</insert>
	
	<!-- 디테일코드 삭제 -->
	<delete id="deleteMatrDtaListDetail" parameterType="mes.com.matrDtaList.service.MatrDtaListVO">
	</delete>


</mapper>
