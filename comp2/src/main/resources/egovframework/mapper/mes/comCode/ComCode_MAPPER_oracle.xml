<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mes.com.comCode.service.impl.ComCodeMapper">
	

	<resultMap id="comCode" type="mes.com.comCode.service.ComCodeVO">
		<result property="comCodeId" column="COM_CODE_ID" />
		<result property="comCodeName" column="COM_CODE_NAME" />
		<result property="comCodeDesc" column="COM_CODE_DESC" />
		<result property="comCodeUsedchk" column="COM_CODE_USEDCHK" />
	</resultMap>
	
	
	
	<!-- 마스터코드 검색 조회 -->
	<select id="selectComCode" resultMap="comCode">

			SELECT
			COM_CODE_ID
			, COM_CODE_NAME
			, COM_CODE_DESC
			, COM_CODE_USEDCHK
			FROM COM_CODE
			<if test="(comCodeId != null and comCodeId != '')  ">
			WHERE COM_CODE_ID=#{comCodeId}
			</if>

	</select>
	
	<!-- 마스터코드 전체 조회 -->
	<select id="selectComCodeList" parameterType="mes.com.comCode.service.ComCodeVO" resultType="egovMap">
				SELECT COM_CODE_ID
					, COM_CODE_NAME
					, COM_CODE_DESC
					, COM_CODE_USEDCHK
				FROM COM_CODE
	</select>
		
	<!-- 디테일코드 조회 -->
	<select id="selectComCodeDetailList" parameterType="mes.com.comCode.service.ComCodeVO" resultType="egovMap">
			SELECT COM_CODE_DETAIL_ID
			, COM_CODE_DETAIL_NAME
			, COM_CODE_DETAIL_DESC
			, COM_CODE_DETAIL_SEQ
			, COM_CODE_DETAIL_USEDCHK
			FROM COM_CODE_DETAIL
			<if test="(comCodeId != null and comCodeId != '')  ">
			WHERE COM_CODE_ID LIKE UPPER(#{comCodeId})
			</if>
	</select>	

	<!-- 디테일코드 업데이트 -->
	<update id="updateComCodeDetail">
		UPDATE COM_CODE_DETAIL
		SET COM_CODE_DETAIL_NAME = #{comCodeDetailName}
		, COM_CODE_DETAIL_DESC = #{comCodeDetailDesc}
		, COM_CODE_DETAIL_SEQ = #{comCodeDetailSeq}
		, COM_CODE_DETAIL_USEDCHK = #{comCodeDetailUsedchk}
		WHERE COM_CODE_DETAIL_ID = UPPER(#{comCodeDetailId})
	</update>
	
	<!-- 디테일코드 삽입 -->
	<insert id="insertComCodeDetail">
		INSERT INTO COM_CODE_DETAIL
		(COM_CODE_ID
		, COM_CODE_DETAIL_ID
		, COM_CODE_DETAIL_NAME
		, COM_CODE_DETAIL_DESC
		, COM_CODE_DETAIL_SEQ
		, COM_CODE_DETAIL_USEDCHK)
		VALUES
		( 
		UPPER(#{comCodeId})
		, UPPER(#{comCodeDetailId})
		, #{comCodeDetailName}
		, #{comCodeDetailDesc}
		, #{comCodeDetailSeq}
		, #{comCodeDetailUsedchk})
	
	</insert>
	
	<!-- 디테일코드 삭제 -->
	<delete id="deleteComCodeDetail" parameterType="mes.com.comCode.service.ComCodeVO">
		DELETE FROM COM_CODE_DETAIL
		<if test="(comCodeDetailId != null and comCodeDetailId != '')">
		WHERE COM_CODE_DETAIL_ID = UPPER(#{comCodeDetailId}) 
		OR COM_CODE_DETAIL_ID = LOWER(#{comCodeDetailId})
		</if>
	</delete>


</mapper>
