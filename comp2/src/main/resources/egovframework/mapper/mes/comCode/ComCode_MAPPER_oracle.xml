<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mes.com.comCode.service.impl.ComCodeMapper">
	

	<resultMap id="comCode" type="mes.com.comCode.service.ComCodeVO">
		<result property="comCodeId" column="COM_CODE_ID" />
		<result property="comCodeName" column="COM_CODE_NAME" />
		<result property="comCodeDesc" column="COM_CODE_DESC" />
		<result property="comCodeUsedchk" column="COM_CODE_USEDCHK" />
	</resultMap>
	
	<insert id="insertComCode">
		<![CDATA[
			INSERT INTO COM_CODE 
				( COM_CODE_ID
				  , COM_CODE_NAME
				  , COM_CODE_DESC
				  , COM_CODE_USEDCHK )
			VALUES ( #{comCodeId}
				  , #{comCodeName}
				  , #{comCodeDesc}
				  , #{comCodeUsedchk} )
		]]>
	</insert>
	
	<update id="updateComCode">
		<![CDATA[
			UPDATE COM_CODE
			SET COM_CODE_ID=#{comCodeId}
				, COM_CODE_NAME=#{comCodeName}
				, COM_CODE_DESC=#{comCodeDesc}
				, COM_CODE_USEDCHK=#{comCodeUsedchk}
						WHERE COM_CODE_ID=#{comCodeId}
				]]>
	</update>
	
	<delete id="deleteComCode">
		<![CDATA[
			DELETE FROM COM_CODE 
						WHERE COM_CODE_ID=#{comCodeId}
				]]>
	</delete>
	
	<select id="selectComCode" resultMap="comCode">
		<![CDATA[
			SELECT
				COM_CODE_ID
				, COM_CODE_NAME
				, COM_CODE_DESC
				, COM_CODE_USEDCHK
			FROM COM_CODE
						WHERE COM_CODE_ID=#{comCodeId}
				]]>
	</select>
	
	<select id="selectComCodeList" parameterType="mes.com.comCode.service.ComCodeVO" resultType="egovMap">
SELECT * FROM (
	SELECT A.*, ROWNUM RNUM FROM (
				SELECT
								COM_CODE_ID
								, COM_CODE_NAME
								, COM_CODE_DESC
								, COM_CODE_USEDCHK
						FROM COM_CODE
				WHERE 1=1
				<if test="searchKeyword != null and searchKeyword != ''">
					<if test="searchCondition == 0">AND
						COM_CODE_ID = #{searchKeyword}
					</if>
					<if test="searchCondition == 1">AND
						COM_CODE_NAME LIKE '%' || #{searchKeyword} || '%'
					</if>
				</if>
					ORDER BY 
						COM_CODE_ID DESC
		
		<![CDATA[					
	) A WHERE ROWNUM <= #{lastIndex}
)WHERE RNUM >= #{firstIndex}
]]>
	</select>	
	<select id="selectComCodeListTotCnt" parameterType="mes.com.comCode.service.ComCodeVO" resultType="int">
			SELECT COUNT(*) totcnt
			FROM COM_CODE
			WHERE 1=1
			<if test="searchKeyword != null and searchKeyword != ''">
				<if test="searchCondition == 0">AND
					COM_CODE_ID = #{searchKeyword}
				</if>
				<if test="searchCondition == 1">AND
					COM_CODE_NAME LIKE '%' || #{searchKeyword} || '%'
				</if>
			</if>
	</select>

</mapper>
