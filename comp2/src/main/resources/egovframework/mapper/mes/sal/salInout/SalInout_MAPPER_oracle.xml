<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mes.sal.inout.service.impl.SalInoutMapper">


	<resultMap id="salInout" type="mes.sal.inout.service.SalInoutVO">
		<result property="salInoutStatement" column="SAL_INOUT_STATEMENT" />
		<result property="comProductCode" column="COM_PRODUCT_CODE" />
		<result property="salInoutDate" column="SAL_INOUT_DATE" />
		<result property="salInoutQuantity" column="SAL_INOUT_QUANTITY" />
		<result property="salInoutCode" column="SAL_INOUT_CODE" />
		<result property="salInoutGubun" column="SAL_INOUT_GUBUN" />
		<result property="proProcessLotNo" column="PRO_PROCESS_LOT_NO" />
		<result property="proOrderDetailCode" column="PRO_ORDER_DETAIL_CODE" />
		<result property="salWriteDate" column="SAL_WRITE_DATE" />
		
		<result property="erpOrderCode" column="ERP_ORDER_CODE" />
		<result property="erpProductCode" column="ERP_PRODUCT_CODE" />
		<result property="erpOrderQty" column="ERP_ORDER_QTY" />
		<result property="erpCustomerCode" column="ERP_CUSTOMER_CODE" />
		<result property="erpProductUnitPrice" column="ERP_PRODUCT_UNIT_PRICE" />
		<result property="erpProductDeadline" column="ERP_PRODUCT_DEADLINE" />
		<result property="erpProductOrderDate" column="ERP_PRODUCT_ORDER_DATE" />
		<result property="erpProductName" column="ERP_PRODUCT_NAME" />
		<result property="erpCustomerName" column="ERP_CUSTOMER_NAME" />
		
		<result property="comCodeDetailId" column="COM_CODE_DETAIL_ID" />
		<result property="comCodeDetailName" column="COM_CODE_DETAIL_NAME" />
		<result property="comProductName" column="COM_PRODUCT_NAME" />
		<result property="proProcessQuantity" column="PRO_PROCESS_QUANTITY" />
	</resultMap>

	<!-- 한 건 조회 -->
	<select id="selectSalInout" resultMap="salInout">
		<![CDATA[
			SELECT SAL_INOUT_STATEMENT
				, COM_PRODUCT_CODE
				, SAL_INOUT_DATE
				, SAL_INOUT_QUANTITY
				, SAL_INOUT_CODE
				, SAL_INOUT_GUBUN
				, PRO_PROCESS_LOT_NO
			FROM SAL_INOUT
			WHERE SAL_INOUT_STATEMENT=#{salInoutStatement}
				]]>
	</select>

	<!-- 제품주문서 조회 -->
	<select id="selectSalInoutList"
		parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
				SELECT
				ERP_ORDER_CODE, ERP_PRODUCT_CODE, ERP_PRODUCT_NAME,
				ERP_ORDER_QTY, ERP_PRODUCT_UNIT_PRICE,
                GET_CODE_DETAIL(ERP_CUSTOMER_CODE) AS ERP_CUSTOMER_NAME,
				TO_CHAR(ERP_PRODUCT_DEADLINE, 'YYYY-MM-dd') AS ERP_PRODUCT_DEADLINE,
				TO_CHAR(ERP_PRODUCT_ORDER_DATE, 'YYYY-MM-dd') AS ERP_PRODUCT_ORDER_DATE                                                                                                       
				FROM ERP_PRODUCT_ORDER		
				WHERE 1=1
				AND ERP_ORDER_CODE NOT IN
				(SELECT ERP_ORDER_CODE FROM PRO_PLAN_DETAIL)
			<if test="erpProductOrderDate != null and erpProductOrderDate != ''">AND
				ERP_PRODUCT_ORDER_DATE = #{erpProductOrderDate}
			</if>
			<if test="erpProductName != null and erpProductName != ''">AND
				ERP_PRODUCT_NAME LIKE '%' || #{erpProductName} || '%'
			</if>
			<if test="erpCustomerName != null and erpCustomerName != ''">AND
				GET_CODE_DETAIL(ERP_CUSTOMER_CODE) LIKE '%' || #{erpCustomerName} || '%'
			</if>
			ORDER BY ERP_PRODUCT_ORDER_DATE	DESC
	</select>
	
	
	<!-- 입출고목록 -->
	<!-- 입출고목록 한꺼번에 조회 -->
	<select id="selectSalProductInOutList"
		parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
					SELECT
	                TO_CHAR(I.SAL_INOUT_DATE, 'YYYY-MM-dd') as SAL_INOUT_DATE,
	                I.SAL_INOUT_GUBUN, I.SAL_INOUT_STATEMENT,
	                I.PRO_PROCESS_LOT_NO, I.COM_PRODUCT_CODE,
					GET_CODE_DETAIL(I.COM_PRODUCT_CODE) as COM_PRODUCT_NAME,
					I.SAL_INOUT_CODE,
					I.SAL_INOUT_QUANTITY, I.SAL_NOW_QUANTITY,
					TO_CHAR(I.SAL_WRITE_DATE, 'YYYY-MM-dd') as SAL_WRITE_DATE
					FROM SAL_INOUT I
					WHERE SAL_INOUT_GUBUN NOT IN('INOUT001')
				<if test="salInoutDate != null and salInoutDate != ''"> AND
					I.SAL_INOUT_DATE = #{salInoutDate}
				</if>
				<if test="salInoutGubun != null and salInoutGubun != ''"> AND
					I.SAL_INOUT_GUBUN = #{salInoutGubun}
				</if>
				<if test="comProductName != null and comProductName != ''">AND
					GET_CODE_DETAIL(I.COM_PRODUCT_CODE) LIKE '%' || #{comProductName} || '%'
				</if>
				<if test="proProcessLotNo != null and proProcessLotNo != ''">AND
					I.PRO_PROCESS_LOT_NO LIKE '%' || #{proProcessLotNo} || '%'
				</if>
		ORDER BY I.SAL_INOUT_DATE DESC		
	</select>
	
	<!-- 입고목록 조회 -->
	<select id="selectSalProductInList"
		parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
					SELECT
					SAL_INOUT_STATEMENT, COM_PRODUCT_CODE, PRO_PROCESS_LOT_NO,
					TO_CHAR(SAL_INOUT_DATE, 'YYYY-MM-dd') as SAL_INOUT_DATE,
					SAL_INOUT_QUANTITY, SAL_INOUT_CODE, SAL_NOW_QUANTITY,
					GET_CODE_DETAIL(COM_PRODUCT_CODE) as COM_PRODUCT_NAME,
					TO_CHAR(SAL_WRITE_DATE, 'YYYY-MM-dd') as SAL_WRITE_DATE
					FROM SAL_INOUT
					WHERE SAL_INOUT_GUBUN = 'INOUT002'
                	AND PRO_PROCESS_LOT_NO NOT IN ('0')
				<if test="salInoutDate != null and salInoutDate != ''"> AND
					SAL_INOUT_DATE = #{salInoutDate}
				</if>
				<if test="comProductName != null and comProductName != ''">AND
					GET_CODE_DETAIL(COM_PRODUCT_CODE) LIKE '%' || #{comProductName} || '%'
				</if>
				<if test="proProcessLotNo != null and proProcessLotNo != ''">AND
					PRO_PROCESS_LOT_NO LIKE '%' || #{proProcessLotNo} || '%'
				</if>
		ORDER BY SAL_INOUT_DATE DESC		
	</select>
	
	<!-- 출고목록 조회 -->
	<select id="selectSalProductOutList"
		parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
				 	SELECT
					I.SAL_INOUT_STATEMENT,
			        I.COM_PRODUCT_CODE,
			        I.PRO_PROCESS_LOT_NO,
					TO_CHAR(I.SAL_INOUT_DATE, 'YYYY-MM-dd') as SAL_INOUT_DATE,
					I.SAL_INOUT_QUANTITY,
          			I.SAL_NOW_QUANTITY,
					GET_CODE_DETAIL(I.COM_PRODUCT_CODE) as COM_PRODUCT_NAME,
					GET_CODE_DETAIL(D.ERP_CUSTOMER_CODE) as COM_CUSTOMER_NAME,
					TO_CHAR(I.SAL_WRITE_DATE, 'YYYY-MM-dd') as SAL_WRITE_DATE,
          			D.ERP_ORDER_CODE
					FROM SAL_INOUT I, PRO_PLAN_DETAIL D, PRO_PROCESS P
					WHERE I.SAL_INOUT_GUBUN = 'INOUT003'
			        AND I.PRO_PROCESS_LOT_NO = '0'
			        AND I.SAL_INOUT_CODE = D.ERP_CUSTOMER_CODE       
			        AND D.PRO_ORDER_DETAIL_CODE = P.PRO_ORDER_DETAIL_CODE
			        AND P.PRO_PROCESS_LOT_NO IS NOT NULL
			        AND D.ERP_PRODUCT_CODE = I.COM_PRODUCT_CODE
				<if test="salInoutDate != null and salInoutDate != ''"> AND
					SAL_INOUT_DATE = #{salInoutDate}
				</if>
				<if test="comProductName != null and comProductName != ''">AND
					GET_CODE_DETAIL(COM_PRODUCT_CODE) LIKE '%' || #{comProductName} || '%'
				</if>
		ORDER BY SAL_INOUT_DATE DESC		
	</select>
	
	<!-- 출고세부내역조회 -->
	<select id="selectSalOutDetail"
		parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
		SELECT
		I.PRO_PROCESS_LOT_NO,
		I.SAL_NOW_QUANTITY,
		I.COM_PRODUCT_CODE,
		O.SAL_INOUT_STATEMENT
		FROM SAL_INOUT I, SAL_INOUT O
		WHERE
    	I.SAL_INOUT_GUBUN = 'INOUT002'
    	AND O.SAL_INOUT_GUBUN = 'INOUT003'
		AND I.SAL_NOW_QUANTITY NOT IN('0')
		AND O.PRO_PROCESS_LOT_NO = '0'
		AND I.COM_PRODUCT_CODE = #{comProductCode}
    	AND O.COM_PRODUCT_CODE = #{comProductCode}
		ORDER BY I.PRO_PROCESS_LOT_NO
	</select>
	
	<!-- 입출고목록 삽입 -->
	<!-- 입고 -->
	<insert id="insertSalIn">
		INSERT INTO SAL_INOUT
		VALUES (#{salInoutStatement}
			, #{comProductCode}
			, TO_DATE(#{salInoutDate}, 'YYYY-MM-dd')
			, #{salInoutQuantity}
			, #{salInoutCode}
			, 'INOUT002'
			, #{proProcessLotNo}
			, SYSDATE
			, #{salInoutQuantity})
	</insert>
	
	<!-- 출고 -->
	<insert id="insertSalOut">			
		INSERT INTO SAL_INOUT
		VALUES (#{salInoutStatement}
			, #{comProductCode}
			, TO_DATE(#{salInoutDate}, 'YYYY-MM-dd')
			, #{salInoutQuantity}
			, #{erpCustomerCode}
			, 'INOUT003'
			, '0'
			, SYSDATE
			, null) <!-- 현수량에  -->
	</insert>
	
	<!-- 입출고목록 수정 -->
	<!-- 입고 -->
	<update id="updateSalIn">
		UPDATE SAL_INOUT SET
		COM_PRODUCT_CODE = #{comProductCode}
		, SAL_INOUT_DATE = TO_DATE(#{salInoutDate}, 'YYYY-MM-dd')
		, SAL_INOUT_QUANTITY = #{proOrderQty}
		, SAL_INOUT_CODE = #{salInoutCode}
		, PRO_PROCESS_LOT_NO = #{proProcessLotNo}
		, SAL_WRITE_DATE = TO_DATE(#{salWriteDate}, 'YYYY-MM-dd')
		WHERE SAL_INOUT_STATEMENT = #{salInoutStatement}	
		AND SAL_INOUT_GUBUN = 'INOUT002'
	</update>
	
	<update id="updateSalOut">					
	<!-- 출고 -->
		UPDATE SAL_INOUT SET
		COM_PRODUCT_CODE = #{comProductCode}
		, SAL_INOUT_DATE = TO_DATE(#{salInoutDate}, 'YYYY-MM-dd')
		, SAL_INOUT_QUANTITY = #{proProcessQuantity}
		, SAL_INOUT_CODE = #{salInoutCode}
		, SAL_INOUT_GUBUN = 'INOUT003'
		, PRO_PROCESS_LOT_NO = #{proProcessLotNo}
		, SAL_WRITE_DATE = TO_DATE(#{salWriteDate}, 'YYYY-MM-dd')
		WHERE SAL_INOUT_STATEMENT = #{salInoutStatement}
	</update>
	
	<!-- 출고세부사항 수정(LOT_NO 부여) -->
	<update id="updateSalModify">
		DECLARE
			BEGIN
				UPDATE SAL_INOUT
				SET SAL_NOW_QUANTITY = (SAL_NOW_QUANTITY - #{salOutQuantity})
				WHERE SAL_INOUT_GUBUN = 'INOUT002'
				AND PRO_PROCESS_LOT_NO = #{proProcessLotNo};
			
				UPDATE SAL_INOUT
				SET PRO_PROCESS_LOT_NO = #{proProcessLotNo}
				WHERE SAL_INOUT_GUBUN = 'INOUT003'
				AND SAL_INOUT_STATEMENT = #{salInoutStatement};
		END;
	</update>
	
	<!-- 입출고목록 삭제 -->
	<!-- 입고 -->
	<delete id="deleteSalIn">
		DELETE FROM SAL_INOUT
		WHERE SAL_INOUT_STATEMENT = #{salInoutStatement}
		AND PRO_PROCESS_LOT_NO = #{proProcessLotNo}
		AND SAL_INOUT_GUBUN = 'INOUT002'
	</delete>
	
	<!-- 출고 -->
	<delete id="deleteSalOut">
		DELETE FROM SAL_INOUT
		WHERE SAL_INOUT_STATEMENT = #{salInoutStatement}
		AND SAL_INOUT_GUBUN = 'INOUT003'
		<if test="proProcessLotNo != null and proProcessLotNo != ''">
		AND PRO_PROCESS_LOT_NO = #{proProcessLotNo}
		</if>
	</delete>
	
	
	<!-- 반품목록 -->
	<!-- 반품입고목록 조회 -->
	<select id="selectSalReturnList"
		parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
					SELECT
					SAL_INOUT_STATEMENT,
					TO_CHAR(SAL_INOUT_DATE, 'YYYY-MM-dd') as SAL_INOUT_DATE,
          			GET_CODE_DETAIL(COM_PRODUCT_CODE) as COM_PRODUCT_NAME,
					GET_CODE_DETAIL(SAL_INOUT_CODE) as COM_CUSTOMER_NAME,
					PRO_PROCESS_LOT_NO, SAL_INOUT_QUANTITY, SAL_NOW_QUANTITY,
					(SAL_INOUT_QUANTITY - SAL_NOW_QUANTITY) as FINAL_QUANTITY,
					TO_CHAR(SAL_WRITE_DATE, 'YYYY-MM-dd') as SAL_WRITE_DATE,
					SAL_INOUT_CODE, COM_PRODUCT_CODE
					FROM SAL_INOUT
					WHERE SAL_INOUT_GUBUN = 'INOUT001'
				<if test="salInoutDate != null and salInoutDate != ''"> AND
					SAL_INOUT_DATE = #{salInoutDate}
				</if>
				<if test="proProcessLotNo != null and proProcessLotNo != ''">AND
					PRO_PROCESS_LOT_NO LIKE '%' || #{proProcessLotNo} || '%'
				</if>
		ORDER BY SAL_INOUT_DATE DESC		
	</select>
	
	<!-- 반품입고목록 삽입 -->
	<insert id="insertSalReturn">
		INSERT INTO SAL_INOUT
		VALUES (#{salInoutStatement}
			, #{comProductCode}
			, TO_DATE(#{salInoutDate}, 'YYYY-MM-dd')
			, #{salInoutQuantity}
			, #{salInoutCode}
			, 'INOUT001'
			, #{proProcessLotNo}
			, SYSDATE
			, #{salNowQuantity})
	</insert>
	
	<!-- 반품입고목록 수정 -->
	<update id="updateSalReturn">
		UPDATE SAL_INOUT SET
		COM_PRODUCT_CODE = #{salInoutCode}
		, SAL_INOUT_DATE = TO_DATE(#{salInoutDate}, 'YYYY-MM-dd')
		, SAL_INOUT_QUANTITY = #{salInoutQuantity}
		, SAL_NOW_QUANTITY = (#{salInoutQuantity} - #{finalQuantity})
		, SAL_INOUT_CODE = #{salInoutCode}
		, PRO_PROCESS_LOT_NO = #{proProcessLotNo}
		WHERE SAL_INOUT_STATEMENT = #{salInoutStatement}
		AND SAL_INOUT_GUBUN = 'INOUT001'
	</update>
	
	<!-- 반품입고목록 삭제 -->
	<delete id="deleteSalReturn">
		DELETE FROM SAL_INOUT
		WHERE PRO_PROCESS_LOT_NO = #{proProcessLotNo}
		AND SAL_INOUT_GUBUN = 'INOUT001'
	</delete>	
	
		
	
	<!-- 모달  -->
	<!-- 모달 : 제품 목록 -->
	<select id="searchProductList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
						SELECT COM_PRODUCT_CODE,
								COM_PRODUCT_NAME,
								COM_PRODUCT_SIZE
						FROM COM_PRODUCT
						WHERE 1=1
						<if test="comProductCode != null and comProductCode != ''"> AND
							COM_PRODUCT_CODE LIKE '%' || #{comProductCode} || '%'
						</if>
						<if test="comProductName != null and comProductName != ''"> AND
							COM_PRODUCT_NAME LIKE '%' || #{comProductName} || '%'
						</if>
						ORDER BY COM_PRODUCT_NAME DESC
	</select>
	
	<!-- 모달 : 고객사 목록 -->
	<select id="searchCustomerList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
						SELECT COM_CODE_DETAIL_ID,
								COM_CODE_DETAIL_NAME
						FROM COM_CODE_DETAIL
						WHERE 1=1
						AND COM_CODE_DETAIL_ID LIKE '%CUSTOMER%'
						<if test="comCodeDetailId != null and comCodeDetailId != ''"> AND
							COM_CODE_DETAIL_ID LIKE '%' || #{comCodeDetailId} || '%'
						</if>
						<if test="comCodeDetailName != null and comCodeDetailName != ''">AND
							COM_CODE_DETAIL_NAME LIKE '%' || #{comCodeDetailName} || '%'
						</if>
						ORDER BY COM_CODE_DETAIL_ID
	</select>

	
	<!-- 모달 : 입고시킬 완제품 LOT_NO 목록 -->
	<select id="searchProductLotNoList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
						SELECT
	                    P.PRO_PROCESS_LOT_NO, D.ERP_PRODUCT_CODE,
	                    D.ERP_PRODUCT_NAME, D.PRO_ORDER_DETAIL_CODE,
	                    D.PRO_ORDER_QTY as PRO_ORDER_QTY
	                    FROM PRO_PROCESS P, PRO_ORDER_DETAIL D
	                    WHERE P.PRO_ORDER_DETAIL_CODE = D.PRO_ORDER_DETAIL_CODE
	                    AND P.PRO_PROCESS_LOT_NO IS NOT NULL
	                    AND NOT P.PRO_PROCESS_LOT_NO IN
	                    (SELECT PRO_PROCESS_LOT_NO
	                	FROM SAL_INOUT
	                	WHERE SAL_INOUT_GUBUN = 'INOUT002')
						<if test="proProcessLotNo != null and proProcessLotNo != ''"> AND
							P.PRO_PROCESS_LOT_NO LIKE '%' || #{proProcessLotNo} || '%'
						</if>
						<if test="erpProductCode != null and erpProductCode != ''">AND
							D.ERP_PRODUCT_CODE LIKE '%' || #{erpProductCode} || '%'
						</if>
						<if test="erpProductName != null and erpProductName != ''">AND
							D.ERP_PRODUCT_NAME LIKE '%' || #{erpProductName} || '%'
						</if>
						ORDER BY P.PRO_PROCESS_LOT_NO
	</select>
	
	<!-- 모달 : 반품가능한 출고 목록 조회 -->
	<select id="searchReturnList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
            SELECT
            TO_CHAR(SAL_INOUT_DATE, 'YYYY-MM-dd') as SAL_INOUT_DATE,
		    GET_CODE_DETAIL(SAL_INOUT_CODE) as COM_CUSTOMER_NAME,
		    GET_CODE_DETAIL(COM_PRODUCT_CODE) as COM_PRODUCT_NAME,
		    PRO_PROCESS_LOT_NO, SAL_INOUT_QUANTITY,
		    SAL_INOUT_CODE, COM_PRODUCT_CODE
			FROM SAL_INOUT
			WHERE SAL_INOUT_GUBUN = 'INOUT003'
		<if test="salInoutDate != null and salInoutDate != ''"> AND
				SAL_INOUT_DATE = #{salInoutDate}
		</if>
		<if test="proProcessLotNo != null and proProcessLotNo != ''">AND
			PRO_PROCESS_LOT_NO LIKE '%' || #{proProcessLotNo} || '%'
		</if>
		ORDER BY SAL_INOUT_DATE DESC
	</select>
	
	<!-- 모달 : 제품주문서 목록 -->
	<select id="searchOrderList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
					SELECT
						(SELECT
						TO_CHAR(SAL_INOUT_DATE, 'YYYY-MM-dd') as SAL_INOUT_DATE
						FROM SAL_INOUT I
						WHERE E.ERP_PRODUCT_CODE = I.COM_PRODUCT_CODE
						AND SAL_INOUT_GUBUN = 'INOUT002'
						AND ROWNUM = 1) as
					SAL_INOUT_DATE,
					E.ERP_ORDER_CODE,
					E.ERP_PRODUCT_NAME,
					E.ERP_ORDER_QTY,
					E.ERP_PRODUCT_CODE,
					GET_CODE_DETAIL(E.ERP_CUSTOMER_CODE) as ERP_CUSTOMER_NAME,
					E.ERP_CUSTOMER_CODE,
						(SELECT SAL_INOUT_STATEMENT
						FROM SAL_INOUT I
						WHERE E.ERP_PRODUCT_CODE = I.COM_PRODUCT_CODE
						AND SAL_INOUT_GUBUN = 'INOUT002'
						AND ROWNUM = 1) as
					SAL_INOUT_STATEMENT
					FROM ERP_PRODUCT_ORDER E
					WHERE
						(SELECT SAL_INOUT_DATE
						FROM SAL_INOUT I
						WHERE E.ERP_PRODUCT_CODE = I.COM_PRODUCT_CODE
						AND ROWNUM = 1)
					IS NOT NULL
					AND ERP_ORDER_CODE IN
								(SELECT ERP_ORDER_CODE
								FROM PRO_PLAN_DETAIL
								WHERE PRO_PLAN_DETAIL_CODE IN
												(SELECT PRO_PLAN_DETAIL_CODE
												FROM SAL_INOUT
												WHERE SAL_INOUT_GUBUN = 'INOUT002'))            					
			<if test="erpCustomerName != null and erpCustomerName != ''"> AND
				ERP_CUSTOMER_NAME LIKE '%' || #{erpCustomerName} || '%'
			</if>
			<if test="erpProductName != null and erpProductName != ''">AND
				ERP_PRODUCT_NAME LIKE '%' || #{erpProductName} || '%'
			</if>
			ORDER BY ERP_ORDER_CODE
	</select>
	
	<!-- 모달 : 생산지시디테일코드 목록 -->
	<select id="searchProductCodeList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
						SELECT
						PRO_ORDER_DETAIL_CODE, ERP_PRODUCT_DEADLINE, ERP_CUSTOMER_CODE,
						ERP_PRODUCT_CODE, PRO_PROCESS_LOT_NO
						FROM PRO_ORDER_DETAIL
						WHERE 1=1
					<if test="proOrderDetailCode != null and proOrderDetailCode != ''"> AND
						PRO_ORDER_DETAIL_CODE LIKE '%' || #{proOrderDetailCode} || '%'
					</if>
					<if test="proProcessLotNo != null and proProcessLotNo != ''">AND
						PRO_PROCESS_LOT_NO LIKE '%' || #{proProcessLotNo} || '%'
					</if>
					ORDER BY PRO_ORDER_DETAIL_CODE
	</select>
</mapper>
