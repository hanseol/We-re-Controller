<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mes.sal.inout.service.impl.SalInoutMapper">
	

	<resultMap id="salInout" type="mes.sal.inout.service.SalInoutVO">
		<result property="salInoutStatement" column="SAL_INOUT_STATEMENT" />
		<result property="comProductCode" column="COM_PRODUCT_CODE" />
		<result property="salInoutDate" column="SAL_INOUT_DATE" />
		<result property="salInoutQuantity" column="SAL_INOUT_QUANTITY" />
		<result property="salInoutCode" column="SAL_INOUT_CODE" />
		<result property="salInoutGubun" column="SAL_INOUT_GUBUN" />
		<result property="proProcessLotNo" column="PRO_PROCESS_LOT_NO" />
	</resultMap>
	
	<!-- 한 건 조회 -->
	<select id="selectSalInout" resultMap="salInout">
		<![CDATA[
			SELECT SAL_INOUT_STATEMENT
				, COM_PRODUCT_CODE
				, SAL_INOUT_DATE
				, SAL_INOUT_QUANTITY
				, SAL_INOUT_CODE
				, SAL_INOUT_GUBUN
				, PRO_PROCESS_LOT_NO
			FROM SAL_INOUT
			WHERE SAL_INOUT_STATEMENT=#{salInoutStatement}
				]]>
	</select>
	
	<!-- 전체 조회 -->
	<select id="selectSalInoutList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
		SELECT * FROM (
			SELECT A.*, ROWNUM RNUM FROM (
				SELECT
						SAL_INOUT_STATEMENT
						, COM_PRODUCT_CODE
						, SAL_INOUT_DATE
						, SAL_INOUT_QUANTITY
						, SAL_INOUT_CODE
						, SAL_INOUT_GUBUN
						, PRO_PROCESS_LOT_NO
				FROM SAL_INOUT
				WHERE 1=1
					<if test="searchKeyword != null and searchKeyword != ''">
						<if test="searchCondition == 0">AND
							SAL_INOUT_STATEMENT = #{searchKeyword}
						</if>
						<if test="searchCondition == 1">AND
							COM_PRODUCT_CODE LIKE '%' || #{searchKeyword} || '%'
						</if>
					</if>
						ORDER BY 
							SAL_INOUT_STATEMENT DESC	
				<![CDATA[						
			) A WHERE ROWNUM <= #{lastIndex}
		)WHERE RNUM > #{firstIndex}
		]]>
	</select>	
	
	<!-- 전체 수 조회하여 페이지 -->
	<select id="selectSalInoutListTotCnt" parameterType="mes.sal.inout.service.SalInoutVO" resultType="int">
			SELECT COUNT(*) totcnt
			FROM SAL_INOUT
			WHERE 1=1
			<if test="searchKeyword != null and searchKeyword != ''">
				<if test="searchCondition == 0">AND
					SAL_INOUT_STATEMENT = #{searchKeyword}
				</if>
				<if test="searchCondition == 1">AND
					COM_PRODUCT_CODE LIKE '%' || #{searchKeyword} || '%'
				</if>
			</if>
	</select>
	
	

	<!-- 입출고목록 조회 -->
	<select id="selectSalProductInoutList" parameterType="mes.sal.inout.service.SalInoutVO" resultType="egovMap">
		
	</select>
</mapper>
